<span mat-dialog-title style="    background: #000000;
border-radius: 10px;
padding: 11px;
color: white;">
  <div class="d-flex justify-content-center">
    <div>
      <h1 >DATOS DE ENVIÓ</h1>
    </div>
  </div>
</span>


<mat-dialog-content class="mat-typography">
  <div class="form row" *ngIf="!data.id">
    <form #dataForm="ngForm" (ngSubmit)="onSubmit(dataForm)" novalidate>
      <div class="form row" *ngIf="!data.id">

        <!-- Nombre y Apellido -->
        <div class="form-group col-12 col-sm-4" [ngClass]="{'has-error': isInvalid(dataForm, 'nombre')}">
          <mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Nombre y Apellido</mat-label>
            <mat-icon matPrefix>account_circle</mat-icon>
            <input matInput type="text" [(ngModel)]="data.nombre" name="nombre" placeholder="Nombre y Apellido" required #nombre="ngModel" (change)="validadorInput()">
            <mat-error *ngIf="nombre.invalid && nombre.touched">Este campo es obligatorio.</mat-error>
          </mat-form-field>
        </div>

        <!-- Número de Teléfono -->
        <div class="form-group col-12 col-sm-4" [ngClass]="{'has-error': isInvalid(dataForm, 'telefono')}">
          <mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Número de Teléfono</mat-label>
            <mat-icon matPrefix>phone</mat-icon>
            <input matInput type="number" [(ngModel)]="data.telefono" name="telefono" placeholder="Número de Teléfono" required #telefono="ngModel" (change)="validadorInput()">
            <mat-error *ngIf="telefono.invalid && telefono.touched">Este campo es obligatorio.</mat-error>
          </mat-form-field>
        </div>

        <!-- Dirección de Entrega -->
        <div class="form-group col-12 col-sm-4" [ngClass]="{'has-error': isInvalid(dataForm, 'direccion')}">
          <mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Dirección de Entrega</mat-label>
            <mat-icon matPrefix>home</mat-icon>
            <input matInput type="text" [(ngModel)]="data.direccion" name="direccion" placeholder="Dirección de Entrega" required #direccion="ngModel" (change)="validadorInput()">
            <mat-error *ngIf="direccion.invalid && direccion.touched">Este campo es obligatorio.</mat-error>
          </mat-form-field>
        </div>

        <!-- Ciudad o Municipio -->
        <div class="form-group col-12 col-sm-4" [ngClass]="{'has-error': isInvalid(dataForm, 'ciudad')}">
          <mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Ciudad o Municipio</mat-label>
            <mat-icon matPrefix>location_city</mat-icon>
            <input matInput type="text" [(ngModel)]="data.ciudad" name="ciudad" placeholder="Ciudad o Municipio" required #ciudad="ngModel" (change)="validadorInput()">
            <mat-error *ngIf="ciudad.invalid && ciudad.touched">Este campo es obligatorio.</mat-error>
          </mat-form-field>
        </div>

        <!-- Barrio o Localidad -->
        <div class="form-group col-12 col-sm-4" [ngClass]="{'has-error': isInvalid(dataForm, 'barrio')}">
          <mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Barrio o Localidad</mat-label>
            <mat-icon matPrefix>map</mat-icon>
            <input matInput type="text" [(ngModel)]="data.barrio" name="barrio" placeholder="Barrio o Localidad" required #barrio="ngModel" (change)="validadorInput()">
            <mat-error *ngIf="barrio.invalid && barrio.touched">Este campo es obligatorio.</mat-error>
          </mat-form-field>
        </div>

        <!-- Color -->
        <div class="form-group col-12 col-sm-4" [ngClass]="{'has-error': isInvalid(dataForm, 'color')}">
          <mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Color</mat-label>
            <mat-icon matPrefix>palette</mat-icon>
            <input matInput type="text" [(ngModel)]="data.color" name="color" placeholder="Color del Producto" required #color="ngModel" (change)="validadorInput()">
            <mat-error *ngIf="color.invalid && color.touched">Este campo es obligatorio.</mat-error>
          </mat-form-field>
        </div>

        <!-- Talla -->
        <div class="form-group col-6 col-sm-4" [ngClass]="{'has-error': isInvalid(dataForm, 'talla')}">
          <mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Talla</mat-label>
            <mat-icon matPrefix>straighten</mat-icon>
            <input matInput type="text" [(ngModel)]="data.talla" name="talla" placeholder="Talla del Producto" required #talla="ngModel" (change)="validadorInput()">
            <mat-error *ngIf="talla.invalid && talla.touched">Este campo es obligatorio.</mat-error>
          </mat-form-field>
        </div>

        <!-- Cantidad -->
        <div class="form-group col-6 col-sm-2" [ngClass]="{'has-error': isInvalid(dataForm, 'cantidadAd')}">
          <mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Cantidad</mat-label>
            <mat-icon matPrefix>reorder</mat-icon>
            <input matInput type="number" [(ngModel)]="data.cantidadAd" name="cantidadAd" (change)="suma(); validadorInput()" placeholder="Cantidad de Producto" required [disabled]="data.opt" #cantidadAd="ngModel">
            <mat-error *ngIf="cantidadAd.invalid && cantidadAd.touched">Este campo es obligatorio.</mat-error>
          </mat-form-field>
        </div>

      </div>
    </form>



      <div class="col-12">
        <p>
            &nbsp;<img class="tyslo-image" data-v-7cfc0e7c="" height="60"
                [src]="datas.foto || 'https://cdn.shopify.com/s/files/1/0631/5255/4203/products/adidasdama.jpg?v=1646070873'"
                style='background-color: #fefefe; border-radius: 6px; box-sizing: border-box; color: rgba(18, 18, 18, 0.75); font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; font-size: 16px; letter-spacing: 0.6px; min-width: 60px; vertical-align: middle;'
                width="60" />
        </p>
        <div class="tyslo-group"
            style='background-color: #fefefe; box-sizing: border-box; color: rgba(18, 18, 18, 0.75); font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; font-size: 16px; letter-spacing: 0.6px; margin-bottom: 10px;'>
            <div data-v-7cfc0e7c="" style="box-sizing: border-box;">
                <div class="align-items-center line d-flex justify-content-between" data-v-7cfc0e7c=""
                    style="align-items: center !important; border-bottom: 1px solid rgb(217, 217, 217); box-sizing: border-box; display: flex !important; justify-content: space-between !important; margin-bottom: 6px; padding-bottom: 10px; padding-top: 6px;">
                    <div class="me-4" data-v-7cfc0e7c=""
                        style="box-sizing: border-box; margin-right: 1.5rem !important;">
                        <div class="position-relative" data-v-7cfc0e7c=""
                            style="box-sizing: border-box; position: relative !important;">
                            <span class="
                                position-absolute
                                top-0
                                start-100
                                translate-middle
                                badge
                                rounded-pill
                                bg-secondary
                      " data-v-7cfc0e7c=""
                                style="background-color: rgb(108, 117, 125) !important; border-color: rgba(var(--color-badge-border),var(--alpha-badge-border)); border-image: initial; border-radius: 50rem !important; border-style: solid; border-width: 1px; box-sizing: border-box; color: white; display: inline-block; font-size: 0.75em; font-weight: 700; left: 60px; letter-spacing: 0.1rem; line-height: 1; padding: 0.35em 0.65em; position: absolute !important; text-align: center; top: 0px !important; transform: translate(-50%, -50%) !important; vertical-align: baseline; white-space: nowrap; word-break: break-word;">1</span>
                        </div>
                    </div>
                    <div class="flex-grow-1" data-v-7cfc0e7c=""
                        style="box-sizing: border-box; flex-grow: 1 !important;">
                        <a data-v-7cfc0e7c=""
                            [href]="'https://dilishoponline.com/tienda/productosView/'+datas.id"
                            style="box-sizing: border-box; color: #0d6efd;" target="_blank">
                            <div class="product-title" data-v-7cfc0e7c=""
                                style="-webkit-box-orient: vertical; -webkit-line-clamp: 2; box-sizing: border-box; display: -webkit-box; line-height: 1.2; max-height: 2.4em; overflow: hidden; text-overflow: ellipsis;">
                                {{ datas.pro_nombre || 'diesel color negro' }}
                            </div>
                        </a><small class="product-title variant" data-v-7cfc0e7c=""
                            style="-webkit-box-orient: vertical; -webkit-line-clamp: 2; box-sizing: border-box; color: black; display: -webkit-box; font-size: 0.875em; line-height: 1.2; max-height: 2.4em; overflow: hidden; text-overflow: ellipsis;"></small>
                    </div>
                    <div class="line-price text-end align-items-center" data-v-7cfc0e7c=""
                        style="align-items: center !important; box-sizing: border-box; color: black; margin: 0px 10px; text-align: right !important;">
                        <span data-v-7cfc0e7c="" style="box-sizing: border-box;">{{ _tools.monedaChange(
                            3,2,this.datas.pro_uni_venta || 0 ) }}</span>
                    </div>
                    <span class="flex-shrink-1 close" data-v-7cfc0e7c=""
                        style="box-sizing: border-box; color: #aaaaaa; flex-shrink: 1 !important; font-size: 20px; font-weight: 700; margin: 0px 10px;">×</span>
                </div>
            </div>
            <div class="row"
                style="--bs-gutter-x: 1.5rem; --bs-gutter-y: 0; box-sizing: border-box; display: flex; flex-wrap: wrap; margin-left: calc(var(--bs-gutter-x)*-0.5); margin-right: calc(var(--bs-gutter-x)*-0.5); margin-top: calc(var(--bs-gutter-y)*-1);">
            </div>
        </div>
        <div class="tyslo-group"
            style='background-color: #fefefe; box-sizing: border-box; color: rgba(18, 18, 18, 0.75); font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; font-size: 16px; letter-spacing: 0.6px; margin-bottom: 10px;'>
            <div class="total-container" data-v-2b9a7796=""
                style="box-sizing: border-box; color: black; margin: 10px 0px;">
                <div class="p-1" data-v-2b9a7796="" style="box-sizing: border-box; padding: 0.25rem !important;">
                    <div class="d-flex justify-content-between py-1" data-v-2b9a7796=""
                        style="box-sizing: border-box; display: flex !important; justify-content: space-between !important; padding-bottom: 0.25rem !important; padding-top: 0.25rem !important;">
                        <div class="fw-normal label-title" data-v-2b9a7796=""
                            style="box-sizing: border-box; color: #535353;">
                            Subtotal
                        </div>
                        <div class="label-value" data-v-2b9a7796="" style="box-sizing: border-box;">
                            <span data-v-2b9a7796="" style="box-sizing: border-box;">{{ _tools.monedaChange(
                                3,2,this.data.costo || 0 ) }}</span>
                        </div>
                    </div>
                    <div class="
                    d-flex
                    justify-content-between
                    my-1
                    total-row
                    align-items-baseline
                    fw-bold
                  " data-v-2b9a7796=""
                        style="align-items: baseline !important; border-top: 1px solid rgba(175, 175, 175, 0.34) !important; box-sizing: border-box; display: flex !important; font-weight: 700 !important; justify-content: space-between !important; margin-bottom: 0.25rem !important; margin-top: 0.25rem !important;">
                        <div data-v-2b9a7796="" style="box-sizing: border-box;">Cantidad</div>
                        <div class="total-value" data-v-2b9a7796=""
                            style="box-sizing: border-box; font-size: 20px;">
                            <span data-v-2b9a7796="" style="box-sizing: border-box;">{{ data.cantidadAd || 1 }}</span>
                        </div>
                    </div>
                    <div class="
                        d-flex
                        justify-content-between
                        my-1
                        total-row
                        align-items-baseline
                        fw-bold
                  " data-v-2b9a7796=""
                        style="align-items: baseline !important; border-top: 1px solid rgba(175, 175, 175, 0.34) !important; box-sizing: border-box; display: flex !important; font-weight: 700 !important; justify-content: space-between !important; margin-bottom: 0.25rem !important; margin-top: 0.25rem !important;">
                        <div data-v-2b9a7796="" style="box-sizing: border-box;">Envio</div>
                        <div  class="total-value" data-v-2b9a7796=""
                            style="box-sizing: border-box; font-size: 20px;">
                            <span *ngIf="!data.pro_vendedor" data-v-2b9a7796="" style="box-sizing: border-box;">
                              <mat-radio-group [(ngModel)]="data.envioT" (change)="suma()">
                                <mat-radio-button class="example-margin" value="gratis">
                                  <span style="font-size: 9px;">Gratis</span>
                                </mat-radio-button>
                                <mat-radio-button class="example-margin" value="priorida">
                                  <span style="font-size: 9px;">$7.000 Envio Prioritario</span>
                                </mat-radio-button>
                              </mat-radio-group>
                            </span>
                            <span *ngIf="data.pro_vendedor" data-v-2b9a7796="" style="box-sizing: border-box;">
                              {{ _formato.monedaChange( 3, 2, data.pro_vendedor || 0) }}
                            </span>
                        </div>
                    </div>
                    <div class="
                    d-flex
                    justify-content-between
                    my-1
                    total-row
                    align-items-baseline
                    fw-bold
                  " data-v-2b9a7796=""
                        style="align-items: baseline !important; border-top: 1px solid rgba(175, 175, 175, 0.34) !important; box-sizing: border-box; display: flex !important; font-weight: 700 !important; justify-content: space-between !important; margin-bottom: 0.25rem !important; margin-top: 0.25rem !important;">
                        <div data-v-2b9a7796="" style="box-sizing: border-box;">Total</div>
                        <div class="total-value" data-v-2b9a7796=""
                            style="box-sizing: border-box; font-size: 20px;">
                            <span data-v-2b9a7796="" style="box-sizing: border-box;">{{ _tools.monedaChange(
                                3,2,( this.data.costo + data.pro_vendedor ) || 0 ) }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
  </div>
  <div class="form row" *ngIf="data.id">
      <div class="col-12">
          <div class="d-flex justify-content-center">
              <div>
                  <h3>Chatear con un asesor sobre la venta realizada</h3>
                  <img src="./assets/icons/whatsapp.png" style="width: 80%;" alt="" (click)="mensajeWhat()">
              </div>
          </div>
      </div>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button mat-dialog-close mat-raised-button color="warn">Cerrar</button>
  <button mat-button cdkFocusInitial mat-raised-button color="primary" (click)="finalizando()" *ngIf="!data.id" [disabled]="disabled" style=" background: #28a745 !important;">
      <span>Confirmar Compra</span>
  </button>
</mat-dialog-actions>
